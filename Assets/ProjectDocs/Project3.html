<!DOCTYPE html><html><head>
      <title>Project3</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\xujin\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.9\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="project-3">Project 3 </h1>
<h2 id="overview">Overview </h2>
<p>A multiplayer game featuring "Battle Royal" experience, combinig PvP with PvE.</p>
<ul>
<li>100 players max in one game</li>
<li>3D first person shooter</li>
<li>Individual designed game project</li>
<li>Sci-fi, Cyberpunk</li>
<li>Reference Game: Destiny 2, APEX, Cyberpunk 2077<br>
<img src="./Resources/Games-Destiny-2-Witch_Queen_Key_Art_4k.webp" alt="RefPic"></li>
<li>Reference Movie: Blade Runner 2049<br>
<img src="./Resources/Blade-Runner-2049-1488.jpg" alt="RefPic"></li>
</ul>
<h2 id="background-story">Background Story </h2>
<p>In 2243, our world is graduaaly being controlled by a mega corp, from   high end chip to life neccessities. After yeats, the mega corp acquired its own land around the globe, built its own space station, and established private arm forces. The company is now developing a nano machine which is extremely valuable both medically and military. The lab in charge of the nano machine is situated under the sea bed of the Pacific Ocean.</p>
<h2 id="gameplay">Gameplay </h2>
<p>The game take place in the aforementioned undersea lab. Pieces of information about the maga crop developing a dangerous nano machine prototype is leaked. The company wants to cover it, so the crop blew up the container filling with nano machines and made the machines attack anyone they saw. Some of the researchers are killed immediately when the explosion started, yet around 100 researchers survived. Player will be one of the survived researchers and try to flee from the lab.</p>
<ul>
<li>
<p>Before Battle</p>
<ul>
<li>Before battle, players can choose to upgrade their attributes, including strength, intelligence, and so on. These attributes determine player's style of playing the game.</li>
<li>For instance, if the player has <strong>high strength</strong> and encounters a door that needs to be unlocked, the player can just force it to open using its high strength. In contrast, if the player has <strong>high intelligence</strong>, the player can hack the door.</li>
</ul>
<pre data-role="codeBlock" data-info="cs" class="language-csharp cs"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">AttributesOfPlayer</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> numbersOfTypes <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">NetworkVariable<span class="token punctuation">&lt;</span><span class="token keyword keyword-float">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&gt;</span></span> attributes <span class="token operator">=</span> <span class="token keyword keyword-new">new</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-float">float</span></span><span class="token punctuation">[</span>numbersOfTypes<span class="token punctuation">]</span><span class="token punctuation">,</span> NetworkVariableReadPermission<span class="token punctuation">.</span>Everyone<span class="token punctuation">,</span> NetworkVariableWritePermission<span class="token punctuation">.</span>Owner<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-enum">enum</span> <span class="token class-name">AttributeType</span>
    <span class="token punctuation">{</span>
        STRENGTH<span class="token punctuation">,</span> INTELLIGENCE
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token function">AttributesOfPlayer</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-float">float</span></span> strength<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> intelligence<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        attributes<span class="token punctuation">.</span>Value<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>AttributeType<span class="token punctuation">.</span>STRENGTH<span class="token punctuation">]</span> <span class="token operator">=</span> strength<span class="token punctuation">;</span>
        attributes<span class="token punctuation">.</span>Value<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>AttributeType<span class="token punctuation">.</span>INTELLIGENCE<span class="token punctuation">]</span> <span class="token operator">=</span> intelligence<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">ChangeValueOfAttribute</span><span class="token punctuation">(</span><span class="token class-name">AttributeType</span> type<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> delta<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> label <span class="token operator">=</span> delta <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">?</span> <span class="token string">"Increased"</span> <span class="token punctuation">:</span> <span class="token string">"decreased"</span><span class="token punctuation">;</span>
        ClientUIController<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>indicationTextManager<span class="token punctuation">.</span><span class="token function">DisplayHintTextOnUI</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>delta<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">type<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToLowerInvariant</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">label</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        attributes<span class="token punctuation">.</span>Value<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>type<span class="token punctuation">]</span> <span class="token operator">+=</span> delta<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-bool">bool</span></span> <span class="token function">CapableOf</span><span class="token punctuation">(</span><span class="token class-name">AttributeType</span> type<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> requiredValue<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>attributes<span class="token punctuation">.</span>Value<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>type<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> requiredValue<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">ChangeValueOfAttribute</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> requiredValue <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        ClientUIController<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>indicationTextManager<span class="token punctuation">.</span><span class="token function">DisplayHintTextOnUI</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Attribute </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">type<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToLowerInvariant</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> doesn't meet the requirement"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></li>
<li>
<p>During the Battle</p>
<ul>
<li>All the player will be deployed in ONE single map, spawned in a designated location randomly. After being deployed in the battle, some of the player will suffer from infection of nano machine. Therefore, they have to complete Encounter 1 to acquire proper medical treatment to their body condition. There will be different route to flee from the lab. However, different route have different requirements on player's attributes. Therefore, players have to choose appropriate routes to successfully escape from the lab.<br>
<img src="./Resources/Screenshot%202023-10-26%20090959.png" alt="GameplayPic"></li>
<li>Try this interactive description of diffferent routes using internet browsers: <a href="./Resources/Project3_Twine.html">Routes</a></li>
</ul>
</li>
<li>
<p>After the Battle</p>
<ul>
<li>After successfully, or failing, to escape from the lab, players can strengthen their attributes using the experiences they gained for completing the battle.</li>
</ul>
</li>
</ul>
<h2 id="engineering">Engineering </h2>
<ul>
<li>
<p>Scene Desigin (Demo)<br>
The scene of Encounter 1 is designed using online resources.</p>
<ul>
<li>1F<br>
<img src="./Resources/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231026092256.jpg" alt="1F"></li>
<li>2F<br>
<img src="./Resources/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231026092331.jpg" alt="2F"></li>
<li>3F<br>
<img src="./Resources/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231026092336.jpg" alt="3F"></li>
</ul>
</li>
<li>
<p>Scripts<br>
The online service of the game is developed using <a href="https://github.com/Unity-Technologies/com.unity.netcode.gameobjects">netcode</a>.<br>
Scripting is completed individually, without using any additional resources or aid from teachers.</p>
<ul>
<li>Base class of interactable</li>
</ul>
<pre data-role="codeBlock" data-info="cs" class="language-csharp cs"><code><span class="token keyword keyword-using">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">Unity<span class="token punctuation">.</span>Netcode</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequireComponent</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Collider</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-abstract">abstract</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Interactable</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">NetworkBehaviour</span><span class="token punctuation">,</span> <span class="token class-name">IHintDisplayable</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Interactable Modifier: Require Item"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> isRequireItemToInteract <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Item</span> requiredItem<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Interactable Modifier: Require Attribute"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> isRequirePlayersAttributesToInteract <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">PlayerController<span class="token punctuation">.</span>AttributesOfPlayer<span class="token punctuation">.</span>AttributeType</span> attributeType<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> requiredValue<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Interactable Modifier: Require Hold"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> isRequireHoldToInteract <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name">NetworkVariable<span class="token punctuation">&lt;</span><span class="token keyword keyword-bool">bool</span><span class="token punctuation">&gt;</span></span> isInteracting <span class="token operator">=</span> <span class="token keyword keyword-new">new</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> NetworkVariableReadPermission<span class="token punctuation">.</span>Everyone<span class="token punctuation">,</span> NetworkVariableWritePermission<span class="token punctuation">.</span>Server<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-bool">bool</span></span> <span class="token function">GetIsInteracting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> isInteracting<span class="token punctuation">.</span>Value<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-virtual">virtual</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token function">GetHintText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">"Press F to Interact"</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">DisplayHintText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        ClientUIController<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">DisplayHintText</span><span class="token punctuation">(</span><span class="token function">GetHintText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> transform<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ServerRpc</span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-virtual">virtual</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">InteractServerRpc</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-ulong">ulong</span></span> clientId<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        isInteracting<span class="token punctuation">.</span>Value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Object Interacted"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ServerRpc</span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-virtual">virtual</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">StopInteractServerRpc</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-ulong">ulong</span></span> clientId<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        isInteracting<span class="token punctuation">.</span>Value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Object stop being interacted"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-protected">protected</span> <span class="token return-type class-name"><span class="token keyword keyword-bool">bool</span></span> <span class="token function">CheckIfRequirementFullfilled</span><span class="token punctuation">(</span><span class="token class-name">PlayerController</span> playerInteracted<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> fullfilledItemRequirement <span class="token operator">=</span> <span class="token operator">!</span>isRequireItemToInteract <span class="token operator">||</span> playerInteracted<span class="token punctuation">.</span>backpack<span class="token punctuation">.</span><span class="token function">IsContain</span><span class="token punctuation">(</span>requiredItem<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Interactable: fullfilled item requirement </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">fullfilledItemRequirement</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> fullfilledAttributeRequirement <span class="token operator">=</span> <span class="token operator">!</span>isRequirePlayersAttributesToInteract <span class="token operator">||</span> playerInteracted<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span><span class="token function">CapableOf</span><span class="token punctuation">(</span>attributeType<span class="token punctuation">,</span> requiredValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Interactable: fullfilled attributes requirement </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">fullfilledAttributeRequirement</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> fullfilledAttributeRequirement <span class="token operator">&amp;&amp;</span> fullfilledItemRequirement<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><ul>
<li>Indication Text</li>
</ul>
<pre data-role="codeBlock" data-info="cs" class="language-csharp cs"><code><span class="token keyword keyword-using">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">TMPro</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">IndicationText</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> indicationTextHoldTime <span class="token operator">=</span> <span class="token number">2f</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> indicationTextFadeTime <span class="token operator">=</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> maximumTextAllowedInOneMessage <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> maximumTextAllowedOnScreen <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword keyword-private">private</span> <span class="token class-name">TMP_Text</span> indicationTextPrefab<span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name">Queue<span class="token punctuation">&lt;</span><span class="token keyword keyword-string">string</span><span class="token punctuation">&gt;</span></span> textsToDisplay <span class="token operator">=</span> <span class="token keyword keyword-new">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> totCurrentText <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">DisplayHintTextOnUI</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> textToDisplay<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>textToDisplay<span class="token punctuation">.</span>Length <span class="token operator">&gt;</span> maximumTextAllowedInOneMessage<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword keyword-for">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-int">int</span></span> i <span class="token operator">=</span> maximumTextAllowedInOneMessage<span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>textToDisplay<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">' '</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    textsToDisplay<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span>textToDisplay<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    textsToDisplay<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span>textToDisplay<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token range operator">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword keyword-return">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        textsToDisplay<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span>textToDisplay<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"IndicationText: text </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">textToDisplay</span><span class="token punctuation">}</span></span><span class="token string"> added to the queue"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name">IEnumerator</span> <span class="token function">IEFadeAwayAndDestroyText</span><span class="token punctuation">(</span><span class="token class-name">TMP_Text</span> textObj<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-float">float</span></span> timer <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-yield">yield</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">WaitForSecondsRealtime</span><span class="token punctuation">(</span>indicationTextHoldTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>timer <span class="token operator">&lt;</span> indicationTextFadeTime<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            timer <span class="token operator">+=</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword keyword-float">float</span></span> alpha <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Lerp</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> timer <span class="token operator">/</span> indicationTextFadeTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            textObj<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Color</span><span class="token punctuation">(</span>textObj<span class="token punctuation">.</span>color<span class="token punctuation">.</span>r<span class="token punctuation">,</span> textObj<span class="token punctuation">.</span>color<span class="token punctuation">.</span>g<span class="token punctuation">,</span> textObj<span class="token punctuation">.</span>color<span class="token punctuation">.</span>b<span class="token punctuation">,</span> alpha<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-yield">yield</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        textObj<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Color</span><span class="token punctuation">(</span>textObj<span class="token punctuation">.</span>color<span class="token punctuation">.</span>r<span class="token punctuation">,</span> textObj<span class="token punctuation">.</span>color<span class="token punctuation">.</span>g<span class="token punctuation">,</span> textObj<span class="token punctuation">.</span>color<span class="token punctuation">.</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Destroy</span><span class="token punctuation">(</span>textObj<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        totCurrentText<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Update is called once per frame</span>
    <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>totCurrentText <span class="token operator">&lt;</span> maximumTextAllowedOnScreen <span class="token operator">&amp;&amp;</span> textsToDisplay<span class="token punctuation">.</span>Count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword keyword-var">var</span></span> newText <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>indicationTextPrefab<span class="token punctuation">,</span> transform<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TMP_Text<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            newText<span class="token punctuation">.</span>text <span class="token operator">=</span> textsToDisplay<span class="token punctuation">.</span><span class="token function">Dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            totCurrentText<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">IEFadeAwayAndDestroyText</span><span class="token punctuation">(</span>newText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><ul>
<li>Player Controller</li>
</ul>
<pre data-role="codeBlock" data-info="cs" class="language-csharp cs"><code><span class="token keyword keyword-using">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">Unity<span class="token punctuation">.</span>Netcode</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">PlayerController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">NetworkBehaviour</span><span class="token punctuation">,</span> <span class="token class-name">IDamagable</span><span class="token punctuation">,</span> <span class="token class-name">IWeaponHoldable</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Children"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Transform</span> cam<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Transform</span> orientation<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Transform</span> cameraPos<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Transform</span> weaponHoldPos<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Prefabs"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword keyword-private">private</span> <span class="token class-name">GameObject</span> orientationPrefab<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword keyword-private">private</span> <span class="token class-name">GameObject</span> weaponPosPrefab<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Backpack"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">BackpackController</span> backpack<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Combat"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> totalHelath<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword keyword-private">private</span> <span class="token class-name">WeaponController</span> currentWeapon<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name">NetworkVariable<span class="token punctuation">&lt;</span><span class="token keyword keyword-float">float</span><span class="token punctuation">&gt;</span></span> CurrentHealth <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token keyword keyword-set">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> NetworkVariableReadPermission<span class="token punctuation">.</span>Everyone<span class="token punctuation">,</span> NetworkVariableWritePermission<span class="token punctuation">.</span>Server<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Ground Check"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> playerHeight<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">LayerMask</span> groundLayerMask<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> isGrounded<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Movement"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> moveSpeed<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> groundDrag<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">AttributesOfPlayer</span> attributes<span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> horizontalInput<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> verticalInput<span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name">Vector3</span> moveDirection<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">Rigidbody</span> rb<span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name">Interactable</span> currentInteractable<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-float">float</span></span> TotalHealth 
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-get">get</span> <span class="token operator">=&gt;</span> totalHelath<span class="token punctuation">;</span>
        <span class="token keyword keyword-set">set</span>
        <span class="token punctuation">{</span>
            TotalHealth <span class="token operator">=</span> totalHelath<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name">WeaponController</span> CurrentWeapon
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-get">get</span> <span class="token operator">=&gt;</span> currentWeapon<span class="token punctuation">;</span>
        <span class="token keyword keyword-set">set</span>
        <span class="token punctuation">{</span>
            currentWeapon <span class="token operator">=</span> <span class="token keyword keyword-value">value</span><span class="token punctuation">;</span>
            currentWeapon<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeaponController<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>owner <span class="token operator">=</span> transform<span class="token punctuation">;</span>
            <span class="token function">UpdateWeaponRefServerRpc</span><span class="token punctuation">(</span>currentWeapon<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NetworkObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-ulong">ulong</span></span> ClientId <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-set">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name">NetworkObjectReference</span> OwnerReference <span class="token operator">=&gt;</span> <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ServerRpc</span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">UpdateWeaponRefServerRpc</span><span class="token punctuation">(</span><span class="token class-name">NetworkObjectReference</span> weaponRef<span class="token punctuation">,</span> <span class="token class-name">ServerRpcParams</span> serverRpcParams <span class="token operator">=</span> <span class="token keyword keyword-default">default</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        weaponRef<span class="token punctuation">.</span><span class="token function">TryGet</span><span class="token punctuation">(</span><span class="token keyword keyword-out">out</span> <span class="token class-name"><span class="token keyword keyword-var">var</span></span> weaponObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        weaponObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeaponController<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>owner <span class="token operator">=</span> NetworkManager<span class="token punctuation">.</span>Singleton<span class="token punctuation">.</span>ConnectedClients<span class="token punctuation">[</span>serverRpcParams<span class="token punctuation">.</span>Receive<span class="token punctuation">.</span>SenderClientId<span class="token punctuation">]</span><span class="token punctuation">.</span>PlayerObject<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>IsOwner<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">IEFindOrientationRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Player: Executing start function for player "</span> <span class="token operator">+</span> NetworkManager<span class="token punctuation">.</span>Singleton<span class="token punctuation">.</span>LocalClientId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        rb <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rb<span class="token punctuation">.</span>freezeRotation <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        ClientId <span class="token operator">=</span> NetworkManager<span class="token punctuation">.</span>Singleton<span class="token punctuation">.</span>LocalClientId<span class="token punctuation">;</span>
        GameManager<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">SetClientHealthServerRpc</span><span class="token punctuation">(</span>totalHelath<span class="token punctuation">,</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NetworkObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cam <span class="token operator">=</span> Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>

        <span class="token comment">//Update Health UI</span>
        ClientUIController<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">UpdateHealthBarValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        CurrentHealth<span class="token punctuation">.</span>OnValueChanged <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-float">float</span></span> previous<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-float">float</span></span> to<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ClientUIController<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">UpdateHealthBarValue</span><span class="token punctuation">(</span>to <span class="token operator">/</span> TotalHealth<span class="token punctuation">)</span><span class="token punctuation">;</span>

        Cursor<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        Cursor<span class="token punctuation">.</span>lockState <span class="token operator">=</span> CursorLockMode<span class="token punctuation">.</span>Confined<span class="token punctuation">;</span>

        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>NetworkManager<span class="token punctuation">.</span>Singleton<span class="token punctuation">.</span>IsHost<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">SpawnNestedChildrenServerRpc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">SpawnNestedChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">InitializeAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">InitializeAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        attributes <span class="token operator">=</span> <span class="token keyword keyword-new">new</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name">IEnumerator</span> <span class="token function">IEFindOrientationRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-yield">yield</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">WaitUntil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> transform<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token string">"Orientation(Clone)"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        orientation <span class="token operator">=</span> transform<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token string">"Orientation(Clone)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        weaponHoldPos <span class="token operator">=</span> orientation<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token string">"WeaponPos(Clone)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">SpawnNestedChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> _orientationObj <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>orientationPrefab<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
        _orientationObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NetworkObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Spawn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _orientationObj<span class="token punctuation">.</span><span class="token function">SetParent</span><span class="token punctuation">(</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>
        orientation <span class="token operator">=</span> _orientationObj<span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> _weaponPos <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>weaponPosPrefab<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
        _weaponPos<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NetworkObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Spawn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _weaponPos<span class="token punctuation">.</span><span class="token function">SetParent</span><span class="token punctuation">(</span>_orientationObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        weaponHoldPos <span class="token operator">=</span> _weaponPos<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ServerRpc</span><span class="token attribute-arguments"><span class="token punctuation">(</span>RequireOwnership <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">SpawnNestedChildrenServerRpc</span><span class="token punctuation">(</span><span class="token class-name">ServerRpcParams</span> serverRpcParams <span class="token operator">=</span> <span class="token keyword keyword-default">default</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-ulong">ulong</span></span> _clientId <span class="token operator">=</span> serverRpcParams<span class="token punctuation">.</span>Receive<span class="token punctuation">.</span>SenderClientId<span class="token punctuation">;</span>
        <span class="token class-name">PlayerController</span> clientObj <span class="token operator">=</span> NetworkManager<span class="token punctuation">.</span>Singleton<span class="token punctuation">.</span>ConnectedClients<span class="token punctuation">[</span>_clientId<span class="token punctuation">]</span><span class="token punctuation">.</span>PlayerObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PlayerController<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Player: Client Id for player's clientObj is "</span> <span class="token operator">+</span> _clientId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> _orientationObj <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>orientationPrefab<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
        _orientationObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NetworkObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SpawnWithOwnership</span><span class="token punctuation">(</span>_clientId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _orientationObj<span class="token punctuation">.</span><span class="token function">SetParent</span><span class="token punctuation">(</span>clientObj<span class="token punctuation">.</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> _weaponPos <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>weaponPosPrefab<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
        _weaponPos<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NetworkObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SpawnWithOwnership</span><span class="token punctuation">(</span>_clientId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _weaponPos<span class="token punctuation">.</span><span class="token function">SetParent</span><span class="token punctuation">(</span>_orientationObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Player: Client "</span> <span class="token operator">+</span> _clientId <span class="token operator">+</span> <span class="token string">" isn't host, calling client rpc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">SetReferenceForClientRpc</span><span class="token punctuation">(</span>_clientId<span class="token punctuation">,</span> _orientationObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NetworkObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _weaponPos<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NetworkObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClientRpc</span></span><span class="token punctuation">]</span>
    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">SetReferenceForClientRpc</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-ulong">ulong</span></span> _clientId<span class="token punctuation">,</span> <span class="token class-name">NetworkObjectReference</span> _orientationObjRef<span class="token punctuation">,</span> <span class="token class-name">NetworkObjectReference</span> _weaponPosRef<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>_clientId <span class="token operator">!=</span> ClientId <span class="token operator">||</span> NetworkManager<span class="token punctuation">.</span>Singleton<span class="token punctuation">.</span>IsHost<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Player: Local client "</span> <span class="token operator">+</span> ClientId <span class="token operator">+</span> <span class="token string">" doesn't match targeted id "</span> <span class="token operator">+</span> _clientId <span class="token operator">+</span> <span class="token string">", returning"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>_orientationObjRef<span class="token punctuation">.</span><span class="token function">TryGet</span><span class="token punctuation">(</span><span class="token keyword keyword-out">out</span> <span class="token class-name">NetworkObject</span> _orientationObj<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> _weaponPosRef<span class="token punctuation">.</span><span class="token function">TryGet</span><span class="token punctuation">(</span><span class="token keyword keyword-out">out</span> <span class="token class-name">NetworkObject</span> _weaponPosObj<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            orientation <span class="token operator">=</span> _orientationObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Transform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            weaponHoldPos <span class="token operator">=</span> _weaponPosObj<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Transform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Player: orientation is set to "</span> <span class="token operator">+</span> orientation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-else">else</span>
        <span class="token punctuation">{</span>
            Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"Player: Cannot resolve orientation ref"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Death</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">HandleInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Handle cursor states and key inputs</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>ClientUIController<span class="token punctuation">.</span>instance <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span> <span class="token operator">&amp;&amp;</span> ClientUIController<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">IsUsingUIElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Cursor<span class="token punctuation">.</span>lockState <span class="token operator">=</span> CursorLockMode<span class="token punctuation">.</span>None<span class="token punctuation">;</span>
            Cursor<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

            horizontalInput <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            verticalInput <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-else">else</span>
        <span class="token punctuation">{</span>
            <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>Cursor<span class="token punctuation">.</span>visible <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                Cursor<span class="token punctuation">.</span>lockState <span class="token operator">=</span> CursorLockMode<span class="token punctuation">.</span>Locked<span class="token punctuation">;</span>
                Cursor<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            horizontalInput <span class="token operator">=</span> Input<span class="token punctuation">.</span><span class="token function">GetAxisRaw</span><span class="token punctuation">(</span><span class="token string">"Horizontal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            verticalInput <span class="token operator">=</span> Input<span class="token punctuation">.</span><span class="token function">GetAxisRaw</span><span class="token punctuation">(</span><span class="token string">"Vertical"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Key map</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKeyDown</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>E<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                ClientUIController<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">OpenBackpackPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKeyDown</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>R<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                CurrentWeapon<span class="token punctuation">.</span><span class="token function">Reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetMouseButton</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> CurrentWeapon <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                CurrentWeapon<span class="token punctuation">.</span><span class="token function">Fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">HandleGroundCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        isGrounded <span class="token operator">=</span> Physics<span class="token punctuation">.</span><span class="token function">Raycast</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span>down<span class="token punctuation">,</span> playerHeight <span class="token operator">*</span> <span class="token number">0.5f</span> <span class="token operator">+</span> <span class="token number">0.2f</span><span class="token punctuation">,</span> groundLayerMask<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">DrawRay</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span>down<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">HandleVisualHint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">DrawRay</span><span class="token punctuation">(</span>cameraPos<span class="token punctuation">.</span>position<span class="token punctuation">,</span> cam<span class="token punctuation">.</span>forward<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>Physics<span class="token punctuation">.</span><span class="token function">Raycast</span><span class="token punctuation">(</span>cameraPos<span class="token punctuation">.</span>position<span class="token punctuation">,</span> cam<span class="token punctuation">.</span>forward<span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name">RaycastHit</span> hitInfo<span class="token punctuation">,</span> <span class="token number">5f</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IHintDisplayable<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">?.</span><span class="token function">DisplayHintText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>ClientUIController<span class="token punctuation">.</span>instance <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            ClientUIController<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">CloseHintText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">HandleInteract</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>Physics<span class="token punctuation">.</span><span class="token function">Raycast</span><span class="token punctuation">(</span>cameraPos<span class="token punctuation">.</span>position<span class="token punctuation">,</span> cam<span class="token punctuation">.</span>forward<span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name">RaycastHit</span> hitInfo<span class="token punctuation">,</span> <span class="token number">5f</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>    
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Interactable<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                currentInteractable <span class="token operator">=</span> hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Interactable<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKeyDown</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>F<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"PlayerController: Interacting with </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">currentInteractable</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    currentInteractable<span class="token punctuation">.</span><span class="token function">InteractServerRpc</span><span class="token punctuation">(</span>ClientId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKeyUp</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>F<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> currentInteractable<span class="token punctuation">.</span>isRequireHoldToInteract <span class="token operator">&amp;&amp;</span> currentInteractable<span class="token punctuation">.</span><span class="token function">GetIsInteracting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"PlayerController: Stop interacting!"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    currentInteractable<span class="token punctuation">.</span><span class="token function">StopInteractServerRpc</span><span class="token punctuation">(</span>ClientId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

            <span class="token punctuation">}</span>
        
        <span class="token punctuation">}</span>

        <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>currentInteractable <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span> <span class="token operator">&amp;&amp;</span> currentInteractable<span class="token punctuation">.</span><span class="token function">GetIsInteracting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"PlayerController: Stop interacting!"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            currentInteractable<span class="token punctuation">.</span><span class="token function">StopInteractServerRpc</span><span class="token punctuation">(</span>ClientId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            currentInteractable <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">HandleSpeedControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">Vector3</span> flatVelocity <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>rb<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> rb<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>flatVelocity<span class="token punctuation">.</span>magnitude <span class="token operator">&gt;</span> moveSpeed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Vector3</span> limitedVelocity <span class="token operator">=</span> flatVelocity<span class="token punctuation">.</span>normalized <span class="token operator">*</span> moveSpeed<span class="token punctuation">;</span>
            rb<span class="token punctuation">.</span>velocity <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>limitedVelocity<span class="token punctuation">.</span>x<span class="token punctuation">,</span> rb<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>y<span class="token punctuation">,</span> limitedVelocity<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">HandleDrug</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>isGrounded<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            rb<span class="token punctuation">.</span>drag <span class="token operator">=</span> groundDrag<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-else">else</span>
        <span class="token punctuation">{</span>
            rb<span class="token punctuation">.</span>drag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">FixedUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>IsOwner<span class="token punctuation">)</span> <span class="token keyword keyword-return">return</span><span class="token punctuation">;</span>

        <span class="token function">HandleGroundCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">HandleMovement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">HandleSpeedControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">HandleDrug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">HandleMovement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        moveDirection <span class="token operator">=</span> orientation<span class="token punctuation">.</span>forward <span class="token operator">*</span> verticalInput <span class="token operator">+</span> orientation<span class="token punctuation">.</span>right <span class="token operator">*</span> horizontalInput<span class="token punctuation">;</span>

        rb<span class="token punctuation">.</span><span class="token function">AddForce</span><span class="token punctuation">(</span>moveDirection<span class="token punctuation">.</span>normalized <span class="token operator">*</span> moveSpeed <span class="token operator">*</span> <span class="token number">10f</span><span class="token punctuation">,</span> ForceMode<span class="token punctuation">.</span>Force<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-bool">bool</span></span> <span class="token function">GetIsOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> IsOwner<span class="token punctuation">;</span>

    <span class="token comment">// Update is called once per frame</span>
    <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>IsOwner<span class="token punctuation">)</span> <span class="token keyword keyword-return">return</span><span class="token punctuation">;</span>

        <span class="token function">HandleInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">HandleVisualHint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">HandleInteract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name">Transform</span> <span class="token function">GetWeaponHoldPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> weaponHoldPos<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name">Quaternion</span> <span class="token function">GetFacingDirection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> cam<span class="token punctuation">.</span>rotation<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><ul>
<li>The full scripts can be found at <a href="https://github.com/M1zukiQAQ1/Project3_Multiplayer">github</a></li>
</ul>
</li>
</ul>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>